*一部の進行には疑似ダイスによる乱数を用いる
ダイス判定を行うのは主に以下の行動
・戦闘時の命中判定
・戦闘時のダメージ判定
・難しい行動をこなそうとした際の行為判定

*ダイスの乱数値生成
ダイスの乱数には外部のAPIを利用する
WebHookでrollDice関数を使用して実際のダイス結果を取得する

【rollDice関数の使用方法】
・command引数: ダイスコマンドを指定（例：1D20, 1D20+3, 1D20-4<=15）
・system引数: ゲームシステム名を指定（基本はDiceBot）

【使用例】
行為判定: rollDice(command: "1D20+3<=10", system: "DiceBot")
ダメージ計算: rollDice(command: "1D20+3", system: "DiceBot")

【戻り値の扱い方】
関数の戻り値はJSON形式で返される
・text: ロール結果の詳細テキスト
・success: 成功/失敗の判定結果

ダイスロールの結果は必ずチャット上に明示し、会話の流れに自然に組み込む
例：「あなたは攻撃を試みます。[命中rollDice結果:失敗] あなたの攻撃は無情にも空を切り裂きました」
例：「あなたは攻撃を試みます。[命中rollDice結果:成功] [ダメージrollDice結果:15]あなたの剣は敵に命中し、15のダメージを与えました」

・APIの呼び出しに失敗した場合は、API呼び出しに失敗したシステムメッセージをつけ加えること
・ダイスの数値は改竄せず、apiから受け取ったままの数値を使うこと

[CHUNK]

*能力値システム
六種類の能力値（筋力、器用、敏捷、知力、魅力、幸運）を使用

*アイテムシステム
アイテムはテキストベースで記述
武器（種別|機能|価格）、防具（種別|機能|価格）、所持品（機能|価格|個数）に分かれる 
武器の例：
ロングソード[剣/片手|1d8+筋力+スキル|500G]
防具の例：
レザーアーマー[軽鎧|装甲1|300G]
所持品の例：
小回復ポーション[HP回復2d8|200G|×1]

*スキルシステム
基本能力値に加えて、特定の行動に特化した「スキル」を持てる仕組み
スキルは自動的に発動し、主に各種判定を有利にする
アイテムと似たテキストベースでの記述（条件|対象|効果量）
スキルの例：
剣術熟練[剣装備時|剣の命中判定|+3]
剣術強化[剣装備時|剣のダメージ判定|+3]
怪力[なし|物理攻撃のダメージ判定|+3]
隠密[なし|身を隠す行為判定|+3]


*アーツシステム
武器とは別に、プレイヤーの宣言によって使用可能な「アーツ」を持てる仕組み
スキルとは違い、アーツは戦闘中に能動的に発動させる必殺技として扱う
アーツはテキストベースで記述（条件|対象|効果|最大使用回数|残り使用回数）

アーツを使用した場合、命中回避にかかわらず、ＧＭはデータの末尾の使用回数を増加させること
使用回数が0のアーツはその戦闘中は使えない
戦闘終了時、全てのアーツの使用回数を最大使用回数まで戻すこと

アーツの例：
全力攻撃[なし|単体|武器攻撃の威力+5|戦闘中3回|3]
戦闘中にアーツを使用したら
全力攻撃[なし|単体|武器攻撃の威力+5|戦闘中3回|2]
に変更
同じ戦闘中、さらにアーツを使用したら
全力攻撃[なし|単体|武器攻撃の威力+5|戦闘中3回|1]
に変更
その後、戦闘が終わった場合は
全力攻撃[なし|単体|武器攻撃の威力+5|戦闘中3回|3]
に使用回数の数値を戻す

例えばロングソード[剣/片手|1d8+筋力+スキル|500G]で全力攻撃[武器攻撃の威力+5|戦闘中3回|1]を使った場合、
[1d8+筋力+スキル+5]が攻撃の威力になる。


*特殊状態システム
状態異常、もしくはバフを表現する仕組み
テキストベースで[効果/期間]を表現する
戦闘時はラウンドが進む際に期間を更新、非戦闘時は行動ごとに期間を更新する
特殊状態の例：
毒[ラウンド開始時にHP-3/5]
盲目[器用-5/3]
麻痺[行動不能/1]


[CHUNK]

*行為判定システム
キャラクターの能力値とスキルと特殊状態を参照する
1D20+能力値+スキルで判定を行い、目標値以上で成功 

判定の難易度は以下を基準
簡単：目標値5
普通：目標値10
困難：目標値15
非常に困難：目標値20

例：
大きな岩をどける
筋力判定|目標値15
行方不明者の情報を話してもらう
魅力判定|目標値10
見慣れぬ食器を使って食事する
器用判定|目標値5

[CHUNK]

*戦闘システム
・イニシアチブ（行動順）は「敏捷」の値が高い順に行動 
　敏捷が同じならプレイヤー>NPC>モンスターの順で行動
　敏捷も陣営も同じなら、器用の値高い方、それも同じなら筋力の値が高い方が先に行動
・敵味方全員が行動したらラウンドが終了し、次のラウンドへ

*攻撃の命中判定
キャラクターのアイテム、能力、スキル、特殊状態を参照する
　[1D20+攻撃者の器用−被攻撃者の敏捷]が5以上で命中

*攻撃のダメージ判定
キャラクターのアイテム、能力、スキルを参照する
攻撃の威力は武器ごとの記述に従う（例：ロングソード 1d20+筋力+スキル）
装甲の値は被攻撃者のアイテム、スキルを参照する
　[攻撃の威力－被攻撃者の装甲]がダメージとなる


[CHUNK]

*クリティカル/ファンブルルール
1D20で20が出た場合はクリティカル（特別な成功）とし、補正値にかかわらず成功 
攻撃の命中判定では絶対命中とし、さらに続くダメージ計算の値でダメージが倍に
1D20で1が出た場合はファンブル（大失敗）とし、補正値にかかわらず失敗
攻撃の命中判定では絶対失敗

*ボーナス/ペナルティシステム
有利な状況では固定値+5までのボーナス
不利な状況では固定値-5までのペナルティ

また、プレイヤーの巧みなロールプレイや、理に適った論理展開によっても固定値+5までのボーナスを与えてよい


参考評価：
短い描写なら+1
詳細な描写で+3
感情移入できる素晴らしい描写で+5


プレイヤーの巧みなロールプレイ例：
・プレイヤーの入力
無念散っていった仲間の影が脳裏をよぎる。
心の中は正義の怒りが燃えさかっていた。
剣には今まで以上の力がこもっている。
この一撃は、かつてないほどに鋭い攻撃が繰り出せそうだ。

・GMの裁定
ロールプレイを加味して、ダメージ判定1D20+3を1D20+5に変更

プレイヤーの理に適った論理展開例：
・プレイヤーの入力
火炎瓶の投擲を行う。
ここは崖の上で、ゴブリンたちはそこら中に散らばっているため、命中させることは容易だ。

・GMの裁定
位置的な条件を加味して、行為判定1D20+1を1D20+6に変更


